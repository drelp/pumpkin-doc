<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pumpkin一站式融合计算平台 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pumpkin一站式融合计算平台 Blog Atom Feed"><title data-react-helmet="true">目标检测模型训练 | Pumpkin一站式融合计算平台</title><meta data-react-helmet="true" property="og:url" content="https://pumpkin.dev/docs/manual/use_case/detectron2"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="目标检测模型训练 | Pumpkin一站式融合计算平台"><meta data-react-helmet="true" name="description" content="概述"><meta data-react-helmet="true" property="og:description" content="概述"><link data-react-helmet="true" rel="shortcut icon" href="/img/pumpkin-doc-pic.svg"><link data-react-helmet="true" rel="canonical" href="https://pumpkin.dev/docs/manual/use_case/detectron2"><link data-react-helmet="true" rel="alternate" href="https://pumpkin.dev/en/docs/manual/use_case/detectron2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pumpkin.dev/docs/manual/use_case/detectron2" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://pumpkin.dev/docs/manual/use_case/detectron2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c7ca059f.css">
<link rel="preload" href="/assets/js/runtime~main.4919f280.js" as="script">
<link rel="preload" href="/assets/js/main.8c016670.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_5xi4 shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--light_iLzQ navbar__logo"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--dark_fEq9 navbar__logo"><b class="navbar__title">Pumpkin</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/introduction/intro">文档</a></div><div class="navbar__items navbar__items--right"><a href="https://git.yunqiic.com/Yunqiic/pumpkin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>托管平台<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_9d7E"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_AzP0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_psqr">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_psqr">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_7sPf"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_u8-6 searchBarLoadingRing_tzWQ"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--light_iLzQ navbar__logo"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--dark_fEq9 navbar__logo"><b class="navbar__title">Pumpkin</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/introduction/intro">文档</a></li><li class="menu__list-item"><a href="https://git.yunqiic.com/Yunqiic/pumpkin" target="_blank" rel="noopener noreferrer" class="menu__link"><span>托管平台<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_9d7E"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_DTvP"><aside class="docSidebarContainer_1mIz"><div class="sidebar_Qqgd"><nav class="menu menu--responsive thin-scrollbar menu_wDB2" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_a3YD" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">概览</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/intro">平台简介</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/knowledge">基础知识</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/arch">平台架构</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">部署指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/environment">环境依赖</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/kubernetes">部署Kubernetes集群</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/harbor">部署Harbor仓库</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/stoarge">部署共享存储</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">部署南瓜系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/deploy/quick_deploy">快速部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/deploy/source_deploy">源码部署</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/faq">常见问题</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">使用手册</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/intro">用户使用说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/overview">概览</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/data">数据管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/algorithm">算法管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/deployment">模型开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/image">镜像管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/train">训练管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/model">模型管理</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">实践案例</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/manual/use_case/detectron2">目标检测模型训练</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/workspace">群组空间</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/faq">常见问题</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">管理手册</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/intro">后台管理说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/metrics">平台监控</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/user">用户管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/resource">资源管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/bill">机时管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/data">数据管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/algorithm">算法管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/image">镜像管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/deployment">开发管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/train">训练管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/model">模型管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/faq">常见问题</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/platform">平台管理</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">进阶开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/arch">架构设计</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/notebook_image">Notebook镜像制作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/apidoc">API文档</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">开源社区</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/code_of_conduct">贡献者行为准则契约</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/contribution">代码贡献指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/issue-temp-and-dev-process">Issue模板及开发流程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/pr-template">Pull Request 规范</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/LICENSE">开源许可证书</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_ktqT"><div class="container padding-top--md padding-bottom--lg docItemWrapper_OfI5"><div class="row"><div class="col docItemCol_H7FE"><div class="docItemContainer_C+Ke"><article><div class="markdown"><header><h1 class="h1Heading_Qw0s">目标检测模型训练</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="概述"></a>概述<a class="hash-link" href="#概述" title="Direct link to heading">#</a></h2><p>本示例以Detectron2算法为例演示在本平台进行目标检测模型训练的全过程。Detectron是Facebook AI研究院(FAIR)于2018年初公开的目标检测平台，包含了大量业内最具代表性的目标检测、图像分割、关键点检测算法。</p><p>detectron2项目的github地址：<a href="https://github.com/facebookresearch/detectron2%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/facebookresearch/detectron2。</a></p><p>detectron2算法学习参考：<a href="https://detectron2.readthedocs.io/en/latest/tutorials/install.html%E3%80%82" target="_blank" rel="noopener noreferrer">https://detectron2.readthedocs.io/en/latest/tutorials/install.html。</a></p><p>在本平台进行模型训练的流程如下：</p><p><img alt="workflow" src="data:image/jpeg;base64,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"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="镜像准备"></a>镜像准备<a class="hash-link" href="#镜像准备" title="Direct link to heading">#</a></h2><p>1、根据Detectron2算法对环境要求，<a href="https://ngc.nvidia.com/catalog/containers/nvidia:pytorch/layers" target="_blank" rel="noopener noreferrer">这里</a>找合适的基础镜像</p><p>2、下载镜像和构建容器的方式可参考<a href="https://blog.csdn.net/chqfeiyang/article/details/89674055/" target="_blank" rel="noopener noreferrer">这里</a></p><p>3、在容器中安装Detectron2算法需要的一些组件</p><p>4、将容器打包成镜像，执行docker commit命令</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker commit d5944567401a detectron2-base:v1.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>其中，d5944567401a是步骤2中启动的容器的id。</p><p>5、将镜像保存为本地文件，可以使用Docker save命令</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker save -o detectron2-base-v1.0.zip detectron2-base:v1.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>6、上传镜像到本平台</p><p>登录平台，点击【镜像管理】菜单，在【我的镜像】页面，点击【创建】，如下图所示。进入我的镜像创建页面。</p><p><img alt="image-create" src="/assets/images/image-create-489583969507742c2d8411c11fd3d671.jpg"></p><p><strong>镜像上传</strong></p><p>镜像用于在模型开发或者训练时创建开发或者训练任务容器。如下图，镜像来源选择”文件上传“，点击【下一步】，上传步骤5中保存的detectron2-base-v1.0.zip，上传完成后，点击【确定】，镜像创建成功。</p><p><img alt="image-add-1" src="/assets/images/image-add-1-8eaf7c1f0931db1e7b13ae4af85145b2.jpg"></p><p><strong>模型开发镜像制作</strong></p><p>本平台的Notebook开发环境使用开源的 JupyterLab，需要用户自行制作安装了 JupyterLab的镜像。</p><p>可以基于上述步骤4中制作的基础镜像，在此基础上安装jupyterlab，制作Notebook镜像。</p><p>参考的dockerfile如下：</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FROM detectron-base:v1.0 </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RUN pip3 install jupyterlab</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CMD [&quot;sh&quot;,&quot;-c&quot;, &quot;jupyter lab --no-browser --ip=0.0.0.0 --allow-root --notebook-dir=&#x27;/code&#x27; --port=8888 --LabApp.token=&#x27;&#x27; --LabApp.allow_origin=&#x27;*&#x27; --LabApp.base_url=$PUMPKIN_JPY_BASE_URL&quot;]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>制作镜像的命令如下：</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -f /home/jupyter-dockerfile -t detectron2-base-notebook:v1.0 .</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>保存镜像的命令如下:</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker save -o detectron2-base-notebook.zip detectron2-base-notebook:v1.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>镜像文件制作完成，可以使用上面的上传部署上传镜像到平台。</p><p><strong>镜像查看</strong></p><p>可以在【镜像管理】-&gt;【我的镜像】页面查看到刚刚上传的镜像。刚刚上传的镜像，状态会处于“制作中”。刷新页面，镜像制作完成后，状态显示为”制作成功“，如下图所示，表示镜像上传成功。</p><p><img alt="image-add-2" src="/assets/images/image-add-2-3d9137df432406e23b54af61a9002acd.jpg"></p><p>7、使用华为云镜像仓库镜像</p><p>为方便初学用户，我们制作好了detectron2算法的训练基础镜像，并放在华为云镜像仓库，包括安装了Jupyterlab的基础镜像(<code>yiluxiangbei/yunqiicpumpkin/detectron-base-notebook:v1.1</code>，可以用于模型开发，也可以用于模型训练)和未安装Jupyterlab的基础镜像(<code>yiluxiangbei/yunqiicpumpkin/detectron-base:v1.0</code>，只能用于模型训练)。</p><p>初学用户可以跳过1-6步，使用华为云镜像仓库的镜像来创建本平台的远程镜像。</p><p><strong>创建远程镜像</strong></p><p>点击【镜像管理】菜单，在【我的镜像】页面点击【创建】，进入创建镜像页面。在镜像创建页面，镜像来源选择”远程镜像“，填写远程镜像地址，点击【确定】，镜像创建成功。</p><p><img alt="image-add-remote-1" src="/assets/images/image-add-remote-1-0ee1cb61debb24fe46363516069cf9e8.jpg"></p><p><strong>通过远程镜像创建的镜像的使用方式与步骤6中通过文件上传的方式创建的镜像相同。</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="算法准备"></a>算法准备<a class="hash-link" href="#算法准备" title="Direct link to heading">#</a></h2><p>1、拉取代码到本地，编译，参考<a href="https://detectron2.readthedocs.io/en/latest/tutorials/install.html" target="_blank" rel="noopener noreferrer">这里</a>。</p><p>2、将编译后的代码打包成.zip格式的压缩包</p><p>3、上传算法到平台</p><p>点击【模型开发】-【算法管理】菜单，在【我的算法】页面点击【创建】，可以打开创建我的算法页面。</p><p><img alt="algorithm-create" src="/assets/images/algorithm-create-c2224f584b88c579c3a824536a1483a3.jpg"></p><p>填写算法名称、模型类型、算法框架、描述和对应生成模型的名称，选择是否上传代码，选择“<strong>是</strong>”，现在上传算法代码。</p><p><img alt="algorithm-add-1" src="/assets/images/algorithm-add-1-bfe19928468a044c6d702d71d4f05496.jpg"></p><p>如下图点击【点击上传】按钮，选择步骤2中打包的zip文件进行上传。上传完成，点击【确定】，即可在【我的算法】页面中看到刚才上传的算法。</p><p><img alt="algorithm-add-2" src="/assets/images/algorithm-add-2-1ca6f49d12e6611e4979bc684698bbd6.jpg"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="数据集准备"></a>数据集准备<a class="hash-link" href="#数据集准备" title="Direct link to heading">#</a></h2><p>Detectron2算法使用MSCOCO2017数据集。下载MSCOCO2017.zip文件，上传至本平台。</p><p>点击【数据管理】-&gt;【数据集管理】菜单，在【我的数据集】页面，点击【创建】，进入数据集创建页面。</p><p><img alt="dataset-create" src="/assets/images/dataset-create-9e424835fb2c90da8ae62ad835c39586.jpg"></p><p>在创建页面填写数据集信息，点击【下一步】，然后点击【点击上传】，选择MSCOCO2017.zip文件，上传数据集。</p><p><img alt="dataset-add-1" src="/assets/images/dataset-add-1-78c091eb31b89c0a3da23b3c28854846.jpg"></p><p><img alt="dataset-add-2" src="/assets/images/dataset-add-2-468cf3610464f0f7643756dfc708f1b2.jpg"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="开发环境调试"></a>开发环境调试<a class="hash-link" href="#开发环境调试" title="Direct link to heading">#</a></h2><p>平台提供在线编程环境，用来调试、运行和保存算法以支撑后续的模型训练，支持开源的 JupterLab。用户可以使用安装过了Jupyterlab的预置镜像来创建Notebook开发环境，也可以自行制作安装了Jupyterlab的镜像，参考<a href="/docs/develop/notebook_image">这里</a>。用户可以创建、打开、启动、停止、删除Notebook。用户在 JupyterLab 里编辑的算法将会自动保存。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><ul><li>Notebook会将算法、数据集分别挂载到/code、/dataset目录，因此 Notebook 镜像需要不占用/code、/dataset目录</li><li>用户如果没有进行停止操作，Notebook 默认 2 个小时会自动停止以释放资源给更多的人使用</li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="创建notebook"></a>创建Notebook<a class="hash-link" href="#创建notebook" title="Direct link to heading">#</a></h3><p>如下图所示，点击【模型开发】-【Notebook】菜单，进入Notebook列表页面。</p><p><img alt="notebook-create" src="/assets/images/notebook-create-48d93f067aa4336364a4cd39a15f7984.jpg"></p><p>使用上述镜像准备步骤中上传的Notebook镜像detectron2-base-notebook来创建一个Notebook，如下图所示：</p><p><img alt="notebook-add-1" src="/assets/images/notebook-add-1-2c3b3a10d42bf988bcedc057426b12a4.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="进入jupyterlab"></a>进入Jupyterlab<a class="hash-link" href="#进入jupyterlab" title="Direct link to heading">#</a></h3><p>等待Notebook启动成功，Notebook状态为”<strong>运行中</strong>“，点击【打开】按钮，可以打开jupyterlab调试页面了。</p><p><img alt="notebook-open" src="/assets/images/notebook-open-528ca29fac2548d803d315b3f0c582d9.jpg"></p><p>在jupyterlab页面，点击【Terminal】，进入终端页面。<strong>进入/code目录，可以看到detectron2算法的代码，可以编辑代码。编辑后，保存文件，代码修改会自动保存到我的算法中的detectron2算法。保存的算法可以用于下一次的模型开发，也可以用于后续的模型训练。</strong></p><p><img alt="jupyterlab-1" src="/assets/images/jupyterlab-1-8074f0a9103fed8668abc939b292a71b.jpg"></p><p><img alt="jupyterlab-2" src="/assets/images/jupyterlab-2-265b035644f568378da9b9eb997b8acd.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="代码调试"></a>代码调试<a class="hash-link" href="#代码调试" title="Direct link to heading">#</a></h3><p>1、数据集路径修改，官方参考文档在<a href="https://github.com/facebookresearch/detectron2/blob/master/datasets/README.md" target="_blank" rel="noopener noreferrer">这里</a></p><p>detectron2算法默认使用/your_path/coco/路径，而本平台默认将数据集挂载在目录/dataset下，建议采用软链接的方式来设置数据集路径，代码如下：</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir /datasets/coco;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ln -s /dataset/MSCOCO2017/annotations /datasets/coco/annotations;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ln -s /dataset/MSCOCO2017/train2017 /datasets/coco/train2017;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ln -s /dataset/MSCOCO2017/test2017 /datasets/coco/test2017;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ln -s /dataset/MSCOCO2017/val2017 /datasets/coco/val2017;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export DETECTRON2_DATASETS=/datasets</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>2、预训练模型下载</p><p>由于maskrcnn模型初始化需要从detectron2://ImageNetPretrained/MSRA/R-50.pkl加载预训练模型，而该地址可能访问超时。因此可将该文件下载至本地（<a href="https://dl.fbaipublicfiles.com/detectron2/ImageNetPretrained/MSRA/R-50.pkl" target="_blank" rel="noopener noreferrer">这里</a>下载），然后将该文件上传至指定目录中，如：/code/detectron2目录下。</p><p>3、启动命令和参数配置，参考<a href="https://detectron2.readthedocs.io/en/latest/tutorials/getting_started.html" target="_blank" rel="noopener noreferrer">这里</a></p><p>参考启动命令如下：</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ"><pre tabindex="0" class="prism-code language-undefined codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd /code/detectron2;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tools/train_net.py --num-gpus 2 --config-file configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_1x.yaml MODEL.WEIGHTS /code/detectron2/R-50.pkl SOLVER.MAX_ITER 4000  OUTPUT_DIR /model</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>--num-gpus：配置gpu卡数</p><p>MODEL.WEIGHTS：预训练模型路径</p><p>SOLVER.MAX_ITER：模型训练迭代次数，默认为4w </p><p> OUTPUT_DIR：将日志文件和保存的模型参数存于/model路径下</p><p>4、算法保存</p><p>在本开发环境中增加、删除和修改的文件都会自动保存到本调试的算法版本中。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="模型训练"></a>模型训练<a class="hash-link" href="#模型训练" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>本平台的模型训练任务成功后，会将/model下的文件保存成模型，供用户预览和下载，所以在模型训练时请将输出目录设置为/model</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="创建训练任务"></a>创建训练任务<a class="hash-link" href="#创建训练任务" title="Direct link to heading">#</a></h3><p>点击【训练管理】菜单，进入训练任务列表页面，点击【创建任务】，进入训练任务创建页面。</p><p><img alt="train-create" src="/assets/images/train-create-9687677c3708337de96f2cb5a6e2affd.jpg"></p><p>如下图所示填写训练任务名称，选择算法、镜像和数据集，填写运行命令，选择资源规格。其中，资源规格是本训练任务能够使用的cpu、gpu、内存和共享内存。点击【开始训练】，创建了一个训练任务。</p><p><img alt="detectron-train-1" src="/assets/images/detectron-train-1-9d338f56327ecc1e523a37b173b6d341.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="创建任务模板"></a>创建任务模板<a class="hash-link" href="#创建任务模板" title="Direct link to heading">#</a></h3><p>如上图，在点击【开始训练】之前先点击【保存模板】，可以把填写的信息保存成一个训练任务模板，供以后从训练任务模板中直接创建相同配置的训练任务。</p><p>也可以直接从任务模板页面创建任务模板，如下图所示，点击【训练管理】菜单，在任务模板页面，点击【创建模板】，进入创建任务模板页面。</p><p><img alt="train-temp-create" src="/assets/images/train-temp-create-3566da805857ec3d5ffbb21071b51d97.jpg"></p><p>在任务模板页面，填写任务相关信息，点击【保存模板】，创建模板成功。</p><p><img alt="train-temp-add-1" src="/assets/images/train-temp-add-1-4d20bb17694e72598de7cd5e6134ac94.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="从任务模板创建训练任务"></a>从任务模板创建训练任务<a class="hash-link" href="#从任务模板创建训练任务" title="Direct link to heading">#</a></h3><p>如下图所示，点击某个模板的【创建训练任务】操作，进入创建训练任务页面，可以修改相关信息，也可以不修改，然后点击【开始训练】，就可以创建一个训练任务。</p><p><img alt="train-add-1" src="/assets/images/train-add-1-4af92066c8f33026234bd070b559aa96.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="查看任务详情"></a>查看任务详情<a class="hash-link" href="#查看任务详情" title="Direct link to heading">#</a></h3><p>点击训练任务的【详情】操作，可以查看任务简况、任务日志和任务负载情况。</p><p><img alt="train-detail-1" src="/assets/images/train-detail-1-2ae50da6c5d5e9b16d4caa9014761f2c.jpg"></p><p><img alt="train-detail-2" src="/assets/images/train-detail-2-aedddf6f338f3d1eb874a00b764ae8af.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="训练模型查看和下载"></a>训练模型查看和下载<a class="hash-link" href="#训练模型查看和下载" title="Direct link to heading">#</a></h3><p>训练任务成功后，平台会将训练任务容器的/model目录下的模型文件输出到【我的模型】，如下图所示查看训练出来的模型。通过算法名称查找对应的模型。</p><p><img alt="model-list-1" src="/assets/images/model-list-1-30224196b502bdfcfda28788a620ea69.jpg"></p><p>使用某算法版本每进行一次训练，就会产生一个版本的模型。点击某模型的【版本列表】操作，可以查看该算法版本对应的所有的模型版本。点击某版本的【预览】操作，可以预览模型文件，点击【下载】操作，可以下载该模型版本。</p><p><img alt="model-list-3" src="/assets/images/model-list-3-5635bf3de8a5195c03a1717ac5101331.jpg"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/manual/model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 模型管理</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/manual/workspace"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">群组空间 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_d7-6 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link">概述</a></li><li><a href="#镜像准备" class="table-of-contents__link">镜像准备</a></li><li><a href="#算法准备" class="table-of-contents__link">算法准备</a></li><li><a href="#数据集准备" class="table-of-contents__link">数据集准备</a></li><li><a href="#开发环境调试" class="table-of-contents__link">开发环境调试</a><ul><li><a href="#创建notebook" class="table-of-contents__link">创建Notebook</a></li><li><a href="#进入jupyterlab" class="table-of-contents__link">进入Jupyterlab</a></li><li><a href="#代码调试" class="table-of-contents__link">代码调试</a></li></ul></li><li><a href="#模型训练" class="table-of-contents__link">模型训练</a><ul><li><a href="#创建训练任务" class="table-of-contents__link">创建训练任务</a></li><li><a href="#创建任务模板" class="table-of-contents__link">创建任务模板</a></li><li><a href="#从任务模板创建训练任务" class="table-of-contents__link">从任务模板创建训练任务</a></li><li><a href="#查看任务详情" class="table-of-contents__link">查看任务详情</a></li><li><a href="#训练模型查看和下载" class="table-of-contents__link">训练模型查看和下载</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">学习</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/intro">平台介绍</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/manual/intro">用户手册</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/management/intro">管理员手册</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://www.yunqiic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">云启智城</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">博客</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/intro">安装流程</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Pumpkin build by 云启智城</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4919f280.js"></script>
<script src="/assets/js/main.8c016670.js"></script>
</body>
</html>