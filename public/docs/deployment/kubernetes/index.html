<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pumpkinä¸€ç«™å¼èåˆè®¡ç®—å¹³å° Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pumpkinä¸€ç«™å¼èåˆè®¡ç®—å¹³å° Blog Atom Feed"><title data-react-helmet="true">éƒ¨ç½²Kubernetesé›†ç¾¤ | Pumpkinä¸€ç«™å¼èåˆè®¡ç®—å¹³å°</title><meta data-react-helmet="true" property="og:url" content="https://pumpkin.dev/docs/deployment/kubernetes"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="éƒ¨ç½²Kubernetesé›†ç¾¤ | Pumpkinä¸€ç«™å¼èåˆè®¡ç®—å¹³å°"><meta data-react-helmet="true" name="description" content="Pumpkin ä½¿ç”¨ Kubernetes é›†ç¾¤æ¥åšæ•´ä¸ªå¹³å°çš„ç»Ÿä¸€ç®¡ç†ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ä¸€ç¯"><meta data-react-helmet="true" property="og:description" content="Pumpkin ä½¿ç”¨ Kubernetes é›†ç¾¤æ¥åšæ•´ä¸ªå¹³å°çš„ç»Ÿä¸€ç®¡ç†ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ä¸€ç¯"><link data-react-helmet="true" rel="shortcut icon" href="/img/pumpkin-doc-pic.svg"><link data-react-helmet="true" rel="canonical" href="https://pumpkin.dev/docs/deployment/kubernetes"><link data-react-helmet="true" rel="alternate" href="https://pumpkin.dev/en/docs/deployment/kubernetes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pumpkin.dev/docs/deployment/kubernetes" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://pumpkin.dev/docs/deployment/kubernetes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c7ca059f.css">
<link rel="preload" href="/assets/js/runtime~main.a24ae582.js" as="script">
<link rel="preload" href="/assets/js/main.b78f448d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_5xi4 shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--light_iLzQ navbar__logo"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--dark_fEq9 navbar__logo"><b class="navbar__title">Pumpkin</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/introduction/intro">æ–‡æ¡£</a></div><div class="navbar__items navbar__items--right"><a href="https://git.yunqiic.com/Yunqiic/pumpkin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>æ‰˜ç®¡å¹³å°<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_9d7E"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_AzP0 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_psqr">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_psqr">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_7sPf"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_u8-6 searchBarLoadingRing_tzWQ"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--light_iLzQ navbar__logo"><img src="/img/pumpkin_logo.svg" alt="Pumpkin Logo" class="themedImage_xbOu themedImage--dark_fEq9 navbar__logo"><b class="navbar__title">Pumpkin</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/introduction/intro">æ–‡æ¡£</a></li><li class="menu__list-item"><a href="https://git.yunqiic.com/Yunqiic/pumpkin" target="_blank" rel="noopener noreferrer" class="menu__link"><span>æ‰˜ç®¡å¹³å°<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_9d7E"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_DTvP"><aside class="docSidebarContainer_1mIz"><div class="sidebar_Qqgd"><nav class="menu menu--responsive thin-scrollbar menu_wDB2" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_a3YD" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">æ¦‚è§ˆ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/intro">å¹³å°ç®€ä»‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/knowledge">åŸºç¡€çŸ¥è¯†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/arch">å¹³å°æ¶æ„</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">éƒ¨ç½²æŒ‡å—</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/environment">ç¯å¢ƒä¾èµ–</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/deployment/kubernetes">éƒ¨ç½²Kubernetesé›†ç¾¤</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/harbor">éƒ¨ç½²Harborä»“åº“</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/stoarge">éƒ¨ç½²å…±äº«å­˜å‚¨</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">éƒ¨ç½²å—ç“œç³»ç»Ÿ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/deploy/quick_deploy">å¿«é€Ÿéƒ¨ç½²</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/deploy/source_deploy">æºç éƒ¨ç½²</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment/faq">å¸¸è§é—®é¢˜</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">ä½¿ç”¨æ‰‹å†Œ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/intro">ç”¨æˆ·ä½¿ç”¨è¯´æ˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/overview">æ¦‚è§ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/data">æ•°æ®ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/algorithm">ç®—æ³•ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/deployment">æ¨¡å‹å¼€å‘</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/image">é•œåƒç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/train">è®­ç»ƒç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/model">æ¨¡å‹ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">å®è·µæ¡ˆä¾‹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/use_case/detectron2">ç›®æ ‡æ£€æµ‹æ¨¡å‹è®­ç»ƒ</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/workspace">ç¾¤ç»„ç©ºé—´</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manual/faq">å¸¸è§é—®é¢˜</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">ç®¡ç†æ‰‹å†Œ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/intro">åå°ç®¡ç†è¯´æ˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/metrics">å¹³å°ç›‘æ§</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/user">ç”¨æˆ·ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/resource">èµ„æºç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/bill">æœºæ—¶ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/data">æ•°æ®ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/algorithm">ç®—æ³•ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/image">é•œåƒç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/deployment">å¼€å‘ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/train">è®­ç»ƒç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/model">æ¨¡å‹ç®¡ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/faq">å¸¸è§é—®é¢˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/management/platform">å¹³å°ç®¡ç†</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">è¿›é˜¶å¼€å‘</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/arch">æ¶æ„è®¾è®¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/notebook_image">Notebooké•œåƒåˆ¶ä½œ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/apidoc">APIæ–‡æ¡£</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">å¼€æºç¤¾åŒº</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/code_of_conduct">è´¡çŒ®è€…è¡Œä¸ºå‡†åˆ™å¥‘çº¦</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/contribution">å¼€æºè´¡çŒ®æŒ‡å—</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/issue-temp-and-dev-process">Issueæ¨¡æ¿åŠå¼€å‘æµç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/pr-template">Pull Request è§„èŒƒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community/LICENSE">å¼€æºè®¸å¯è¯ä¹¦</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_ktqT"><div class="container padding-top--md padding-bottom--lg docItemWrapper_OfI5"><div class="row"><div class="col docItemCol_H7FE"><div class="docItemContainer_C+Ke"><article><div class="markdown"><header><h1 class="h1Heading_Qw0s">éƒ¨ç½²Kubernetesé›†ç¾¤</h1></header><p>Pumpkin ä½¿ç”¨ Kubernetes é›†ç¾¤æ¥åšæ•´ä¸ªå¹³å°çš„ç»Ÿä¸€ç®¡ç†ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ä¸€ç¯</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>å¿…é¡»ä¿è¯ã€<a href="/docs/deployment/environment"><strong>ç¯å¢ƒä¾èµ–</strong></a>ã€‘ä¸­æ‰€æœ‰æ¡ä»¶å·²æ»¡è¶³æ‰èƒ½éƒ¨ç½² Kubernetes é›†ç¾¤ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°å„ç§ä¸å¯æ§é—®é¢˜</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å¹³å°ä»…æä¾› ã€å• master èŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²ã€‘çš„éƒ¨ç½²æ–¹å¼ï¼Œè¯¥æ–¹å¼å¯¹äºé›†ç¾¤æ•°è¾ƒå°‘æˆ–è€…å¯¹é«˜å¯ç”¨è¦æ±‚ä¸é«˜çš„åœºæ™¯é€‚ç”¨ï¼Œé€šå¸¸å»ºè®®èŠ‚ç‚¹æ•°<strong>å°‘äºç­‰äº 20 ä¸ªèŠ‚ç‚¹</strong>çš„é›†ç¾¤ä½¿ç”¨</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="ç‰ˆæœ¬ä¿¡æ¯"></a>ç‰ˆæœ¬ä¿¡æ¯<a class="hash-link" href="#ç‰ˆæœ¬ä¿¡æ¯" title="Direct link to heading">#</a></h2><ul><li><strong>Kubernetes ç‰ˆæœ¬ï¼š</strong> <code>v1.16.3</code></li><li><strong>docker ç‰ˆæœ¬ï¼š</strong> <code>19.03.13</code></li><li><strong>calico ç‰ˆæœ¬ï¼š</strong> <code>v3.10.0</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²"></a>å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²<a class="hash-link" href="#å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å¹³å°æä¾›äº†å• master èŠ‚ç‚¹æ–¹æ¡ˆçš„ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼Œ<strong>é€‚ç”¨äºå¯¹ Kubernetes ä¸äº†è§£çš„æ–°æ‰‹éƒ¨ç½²ï¼Œä»…éœ€æŒ‰æ­¥éª¤æ‰§è¡Œå³å¯</strong></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="éƒ¨ç½²è„šæœ¬è¯´æ˜"></a>éƒ¨ç½²è„šæœ¬è¯´æ˜<a class="hash-link" href="#éƒ¨ç½²è„šæœ¬è¯´æ˜" title="Direct link to heading">#</a></h3><p>ä¸‹è½½æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://pumpkin.yunqiic.com/install/k8s_install.zip</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">unzip</span><span class="token plain"> k8s_install.zip</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> single_master_k8s_install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>ä¸‹è½½ä¸‹æ¥å¹¶è§£å‹åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="center">æ–‡ä»¶å</th><th align="center">æ–‡ä»¶åŠŸèƒ½</th></tr></thead><tbody><tr><td align="center"><strong>base.config</strong></td><td align="center">é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ ¹æ®é›†ç¾¤æƒ…å†µæ‰‹åŠ¨é…ç½®</td></tr><tr><td align="center"><strong>comm.sh</strong></td><td align="center">å…¬å…±è„šæœ¬å‡½æ•°ï¼Œæä¾›ç»™å…¶ä»–è„šæœ¬è°ƒç”¨</td></tr><tr><td align="center"><strong>master_install_k8s.s</strong></td><td align="center">master èŠ‚ç‚¹éƒ¨ç½²è„šæœ¬</td></tr><tr><td align="center"><strong>node_install_k8s.sh</strong></td><td align="center">node èŠ‚ç‚¹éƒ¨ç½²è„šæœ¬</td></tr><tr><td align="center"><strong>del_k8s.sh</strong></td><td align="center">å¸è½½ k8s ä»¥åŠ docker è„šæœ¬</td></tr><tr><td align="center"><strong>ssh_trust_add.expã€ssh_trust_init.exp</strong></td><td align="center">æœåŠ¡å™¨äº’ä¿¡è„šæœ¬</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="masterèŠ‚ç‚¹éƒ¨ç½²"></a>masterèŠ‚ç‚¹éƒ¨ç½²<a class="hash-link" href="#masterèŠ‚ç‚¹éƒ¨ç½²" title="Direct link to heading">#</a></h3><ul><li><p><strong>root è´¦æˆ·ç™»å½• master èŠ‚ç‚¹</strong></p></li><li><p><strong>éƒ¨ç½²è„šæœ¬ä¸‹è½½ã€è§£å‹å¹¶è¿›å…¥ç›®å½•</strong></p></li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /root</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://pumpkin.yunqiic.com/install/k8s_install.zip</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">unzip</span><span class="token plain"> k8s_install.zip</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> single_master_k8s_install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li><strong>ä¿®æ”¹é…ç½®</strong></li></ul><blockquote><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> base.config</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>æ ¹æ®æç¤ºä¿®æ”¹ç›¸å…³é…ç½®é¡¹</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># master èŠ‚ç‚¹ IP åœ°å€</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">masterip</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.0.2&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è¿‡æ»¤ IP æ®µ,ç”¨äºè¿‡æ»¤å¾—åˆ°æœåŠ¡å™¨çš„ IP åœ°å€</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ip_segment</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.0&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># k8s ç‰ˆæœ¬ï¼Œä¸è¦æ›´æ”¹</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">k8s_version</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;v1.16.3&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># root ç”¨æˆ·å¯†ç ï¼Œè¯·è®¾ç½® k8s é›†ç¾¤æ‰€æœ‰æœåŠ¡å™¨ root ç”¨æˆ·å¯†ç ä¸ºç»Ÿä¸€å¯†ç </span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">root_passwd</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;123456&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ ipï¼Œæœ‰å‡ å°å¡«å‡ å°</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">hostip</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">192.168</span><span class="token plain">.0.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">192.168</span><span class="token plain">.0.2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">192.168</span><span class="token plain">.0.3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cidr ç½‘æ®µï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ç”¨æ”¹åŠ¨</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">pod_network_cidr</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10.244.0.0/16&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">service_cidr</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10.96.0.0/12&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#ä»¥ä¸‹ä¸¤é¡¹ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œä¸ç”¨å¡«å†™</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">tocken</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">sha_value</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å…¶ä¸­ï¼Œcidr ç½‘æ®µæ ¹æ®é›†ç¾¤å¤§å°è¿›è¡Œè°ƒæ•´ï¼Œè°ƒæ•´æ–¹æ³•å‚è€ƒ <a href="#calico%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><strong>calicoç½‘ç»œé…ç½®</strong></a></p></blockquote><ul><li><strong>calicoç½‘ç»œé…ç½®æ–‡ä»¶ä¸‹è½½</strong></li></ul><p>æ ¹æ®é›†ç¾¤çš„å¤§å°æƒ…å†µï¼Œä¸‹è½½å¯¹åº”çš„ calico é…ç½®æ–‡ä»¶ï¼Œå…·ä½“ä¸‹è½½æ–¹å¼å‚è€ƒ <a href="#calico%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><strong>calicoç½‘ç»œé…ç½®</strong></a></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><strong>å¿…é¡»ä¸‹è½½ calico é…ç½®æ–‡ä»¶ï¼Œå¦åˆ™æ‰§è¡Œè„šæœ¬ä¼šå®‰è£…ä¸æˆåŠŸï¼ï¼ï¼</strong></p><p>ä¸‹è½½åçš„ calico é…ç½®æ–‡ä»¶éœ€ä¸éƒ¨ç½²è„šæœ¬æ”¾åˆ°åŒä¸ªæ–‡ä»¶å¤¹ä¸­</p></div></div><ul><li><strong>æ‰§è¡Œè„šæœ¬</strong></li></ul><blockquote><ul><li>å¦‚æœ master èŠ‚ç‚¹æ˜¯ <strong>NVIDIA GPU</strong> èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./master_install_k8s.sh nvidia_gpu</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>æ‰§è¡Œè„šæœ¬åä¸ºäº†èƒ½è®© k8s é›†ç¾¤è¯†åˆ«åˆ° NVIDIA GPU èµ„æºï¼Œè¿˜éœ€è¦å®‰è£…ç›¸å¯¹åº”çš„è®¾å¤‡æ’ä»¶ï¼Œå…·ä½“å‚è€ƒ <a href="#nvidia-device-plugin%E5%AE%89%E8%A3%85"><strong>nvidia-device-pluginå®‰è£…</strong></a></p><ul><li>å¦‚æœ master èŠ‚ç‚¹æ˜¯ <strong>Huawei A910</strong> èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./master_install_k8s.sh huawei_a910</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>æ‰§è¡Œè„šæœ¬åä¸ºäº†èƒ½è®© k8s é›†ç¾¤è¯†åˆ«åˆ° Huawei A910 èµ„æºï¼Œè¿˜éœ€è¦å®‰è£…ç›¸å¯¹åº”çš„è®¾å¤‡æ’ä»¶ï¼Œå…·ä½“å‚è€ƒ <a href="#huawei-a910-device-plugin%E5%AE%89%E8%A3%85"><strong>huawei-a910-device-pluginå®‰è£…</strong></a></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¦‚æœä¸æƒ³è®©èŠ‚ç‚¹ä¹‹é—´äº’ä¿¡çš„è¯ï¼Œåˆ™æŠŠ <code>master_install_k8s.sh</code> è„šæœ¬ä¸­çš„ <code>rootssh_trust</code> æ³¨é‡Šæ‰å³å¯
<img alt="k8s-close-trust" src="/assets/images/k8s-close-trust-903360d67ac6f60b4e29a51f1c6295e1.png"></p></div></div><ul><li>å¦‚æœ master èŠ‚ç‚¹æ˜¯æ™®é€šèŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./master_install_k8s.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å¦‚æœæ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯:</p><p><img alt="k8s-deploy-faq" src="/assets/images/k8s-deploy-faq-8890917378095082707df1a4fb8c9285.png"></p><p>æ˜¯ ubuntu æº key ä¸å­˜åœ¨çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨åŠ å…¥ key æ¥è§£å†³ï¼Œç„¶åå†é‡æ–°æ‰§è¡Œè„šæœ¬å³å¯</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> apt-key adv --keyserver keyserver.ubuntu.com --recv-keys </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">é”™è¯¯æç¤ºä¸­ç®­å¤´æ‰€æŒ‡ä½ç½®çš„å­—ç¬¦ä¸²</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div></div></div></blockquote><ul><li><strong>æ‰§è¡Œå®Œæ¯•åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤çœ‹èŠ‚ç‚¹æ˜¯å¦ readyï¼Œk8s ç³»ç»Ÿç»„ä»¶æ˜¯å¦çš„å¤„äº running çŠ¶æ€</strong></li></ul><blockquote><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get </span><span class="token function" style="color:rgb(130, 170, 255)">node</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pod -n kube-system</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å¦‚æœé›†ç¾¤æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯å¦‚ä¸‹çŠ¶æ€ï¼Œé‚£ä¹ˆ master èŠ‚ç‚¹å·²ç»éƒ¨ç½²æˆåŠŸï¼š</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME          STATUS   ROLES    AGE    VERSION</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">master-node   Ready    master   261d   v1.16.3</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                       READY   STATUS    RESTARTS   AGE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">calico-kube-controllers-689532984b-dd115   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          73s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">calico-node-5d421                          </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          73s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">coredns-434d7b3231-45216                   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          73s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">coredns-23445326d2-hjh4v                   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          73s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">etcd-umaster                               </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          25s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-apiserver-umaster                     </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          22s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-controller-manager-umaster            </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          15s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-proxy-1s34f4                          </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          73s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-scheduler-umaster                     </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          20s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>ä»¥ä¸Šæ­¥éª¤æ‰§è¡Œé¡ºåˆ©ï¼Œå­èŠ‚ç‚¹ <code>root</code> è´¦æˆ·ä¸‹çš„ <code>/root</code> ç›®å½•ä¸‹ä¼šç”Ÿæˆ <code>node_install_k8s.sh</code>ã€<code>base.config</code> ç­‰æ–‡ä»¶ï¼Œæ–¹ä¾¿åœ¨ node èŠ‚ç‚¹ä¸Šå®‰è£…ç›¸å…³ç»„ä»¶å¹¶åŠ å…¥ k8s é›†ç¾¤ï¼Œ<strong>å¦‚æœæ³¨é‡Šäº†èŠ‚ç‚¹äº’ä¿¡ä»£ç ï¼Œåˆ™å­èŠ‚ç‚¹çš„ç›¸åº”ç›®å½•ä¸‹ä¸ä¼šäº§ç”Ÿç›¸åº”çš„è„šæœ¬æ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ä¼ è¾“</strong></p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="node-èŠ‚ç‚¹éƒ¨ç½²åŒ…æ‹¬æ–°å¢-node-èŠ‚ç‚¹"></a>node èŠ‚ç‚¹éƒ¨ç½²ï¼ˆåŒ…æ‹¬æ–°å¢ node èŠ‚ç‚¹ï¼‰<a class="hash-link" href="#node-èŠ‚ç‚¹éƒ¨ç½²åŒ…æ‹¬æ–°å¢-node-èŠ‚ç‚¹" title="Direct link to heading">#</a></h3><ul><li><p><strong>root è´¦æˆ·ç™»å½• node èŠ‚ç‚¹</strong></p></li><li><p><strong>æ‰§è¡Œè„šæœ¬</strong></p></li></ul><blockquote><p>å¦‚æœéƒ¨ç½² master èŠ‚ç‚¹æ—¶ï¼Œæ³¨é‡Šäº†èŠ‚ç‚¹äº’ä¿¡ä»£ç ï¼Œæˆ–è€…æ˜¯<strong>æ–°å¢çš„ node èŠ‚ç‚¹</strong>ï¼Œåˆ™éœ€è‡ªå·±ä¼ è¾“ç›¸åº”çš„æ–‡ä»¶åˆ° node èŠ‚ç‚¹ä¸Š</p><ol><li><p>æ‹·è´masterèŠ‚ç‚¹çš„ /root/.kube/config æ–‡ä»¶å¤¹åˆ°nodeèŠ‚ç‚¹çš„ /root/.kube/config</p></li><li><p>æ‹·è´masterèŠ‚ç‚¹çš„ /root/single_master_k8s_install æ–‡ä»¶å¤¹åˆ°nodeèŠ‚ç‚¹çš„ /root/single_master_k8s_install</p></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœæ˜¯<strong>æ–°å¢ node èŠ‚ç‚¹</strong>ï¼Œé›†ç¾¤åˆ›å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆçš„tokenå’Œsha_valueå¯èƒ½å·²ç»å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç”Ÿæˆä¸€ä¸ª</p><ol><li>è¿›å…¥masterèŠ‚ç‚¹ï¼Œç”Ÿæˆtokenå’Œsha_value</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubeadm token create </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç”Ÿæˆtoken</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> openssl rsa -pubin -outform der </span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/dev/null </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> openssl dgst -sha256 -hex </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;s/^.* //&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç”Ÿæˆsha_value</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ol start="2"><li>æ‹·è´ç”Ÿæˆçš„tokenå’Œsha_valueï¼Œè¿›åˆ°è¦æ–°å¢çš„nodeèŠ‚ç‚¹</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain">  /root/single_master_k8s_install</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> base.config</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å°† base.config ä¸­ <strong>tocken</strong> é€‰é¡¹å’Œ <strong>sha_value</strong> é€‰é¡¹çš„å€¼æ›¿æ¢æˆæ–°ç”Ÿæˆtokençš„å€¼å’Œsha_valueçš„å€¼</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¦‚æœä¸æƒ³è®©èŠ‚ç‚¹ä¹‹é—´äº’ä¿¡çš„è¯ï¼Œåˆ™æŠŠ <code>node_install_k8s.sh</code> è„šæœ¬ä¸­çš„ <code>rootssh_trust</code> æ³¨é‡Šæ‰å³å¯
<img alt="k8s-node-close-trust" src="/assets/images/k8s-node-close-trust-1a1806318f88c8962cdbbae0afe221d2.png"></p></div></div></blockquote><p>å¦‚æœ node èŠ‚ç‚¹æ˜¯ <strong>NVIDIA GPU</strong> èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /root</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./node_install_k8s.sh nvidia_gpu</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>æ‰§è¡Œè„šæœ¬åä¸ºäº†èƒ½è®© k8s é›†ç¾¤è¯†åˆ«åˆ° NVIDIA GPU èµ„æºï¼Œè¿˜éœ€è¦å®‰è£…ç›¸å¯¹åº”çš„è®¾å¤‡æ’ä»¶ï¼Œå…·ä½“å‚è€ƒ <a href="#nvidia-device-plugin%E5%AE%89%E8%A3%85"><strong>nvidia-device-pluginå®‰è£…</strong></a></p><p>å¦‚æœ node èŠ‚ç‚¹æ˜¯ <strong>Huawei A910</strong> èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /root</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./node_install_k8s.sh huawei_a910</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>æ‰§è¡Œè„šæœ¬åä¸ºäº†èƒ½è®© k8s é›†ç¾¤è¯†åˆ«åˆ° Huawei A910 èµ„æºï¼Œè¿˜éœ€è¦å®‰è£…ç›¸å¯¹åº”çš„è®¾å¤‡æ’ä»¶ï¼Œå…·ä½“å‚è€ƒ <a href="#huawei-a910-device-plugin%E5%AE%89%E8%A3%85"><strong>huawei-a910-device-pluginå®‰è£…</strong></a></p><p>å¦‚æœ node èŠ‚ç‚¹æ˜¯æ™®é€šèŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /root</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./node_install_k8s.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å¦‚æœæ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯:</p><p><img alt="k8s-deploy-faq" src="/assets/images/k8s-deploy-faq-8890917378095082707df1a4fb8c9285.png"></p><p>æ˜¯ ubuntu æº key ä¸å­˜åœ¨çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨åŠ å…¥ key æ¥è§£å†³ï¼Œç„¶åå†é‡æ–°æ‰§è¡Œè„šæœ¬å³å¯</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> apt-key adv --keyserver keyserver.ubuntu.com --recv-keys </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">é”™è¯¯æç¤ºä¸­ç®­å¤´æ‰€æŒ‡ä½ç½®çš„å­—ç¬¦ä¸²</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div></div></div><ul><li><strong>æ‰§è¡Œå®Œæ¯•åï¼Œåœ¨ master èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤çœ‹å­èŠ‚ç‚¹åŠ å…¥é›†ç¾¤å¹¶å¤„äº ready çŠ¶æ€</strong></li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get </span><span class="token function" style="color:rgb(130, 170, 255)">node</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å¦‚æœé›†ç¾¤å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œéœ€è¦å¸è½½ k8s ä»¥åŠ docker å¹¶é‡æ–°å®‰è£…ï¼Œå¯ä»¥åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šå…ˆæ‰§è¡Œä»¥ä¸‹è„šæœ¬å½»åº•æ¸…é™¤ç›¸å…³ç»„ä»¶</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./del_kube.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="é›†ç¾¤è™šæ‹ŸåŒ–ç½‘ç»œéªŒè¯"></a>é›†ç¾¤è™šæ‹ŸåŒ–ç½‘ç»œéªŒè¯<a class="hash-link" href="#é›†ç¾¤è™šæ‹ŸåŒ–ç½‘ç»œéªŒè¯" title="Direct link to heading">#</a></h3><p>å½“ k8s é›†ç¾¤çš„ master èŠ‚ç‚¹å’Œ node èŠ‚ç‚¹å‡éƒ¨ç½²æˆåŠŸåï¼Œéœ€éªŒè¯ä¸‹æ•´ä¸ªé›†ç¾¤çš„è™šæ‹ŸåŒ–ç½‘ç»œæ˜¯å¦æ­£å¸¸</p><ul><li>æŒ‰ç…§å¦‚ä¸‹ Pod çš„éƒ¨ç½²æ–‡ä»¶ï¼Œä½¿ç”¨ kubectl å·¥å…·éƒ¨ç½² test-calico-pod-1</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> test-calico-pod-1.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å¤åˆ¶ä¸‹æ–‡åˆ°test-calico-pod-1.yamlä¸­å¹¶ä¿å­˜</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Pod</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: test-calico-pod-1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  containers:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: nginx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: nginx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - containerPort: </span><span class="token number" style="color:rgb(247, 140, 108)">80</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>åœ¨k8sä¸­åº”ç”¨è¿™ä¸ªyaml</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f test-calico-pod-1.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li>æŒ‰ç…§å¦‚ä¸‹ Pod çš„éƒ¨ç½²æ–‡ä»¶ï¼Œä½¿ç”¨ kubectl å·¥å…·éƒ¨ç½² test-calico-pod-2</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> test-calico-pod-2.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å¤åˆ¶ä¸‹æ–‡åˆ°test-calico-pod-2.yamlä¸­å¹¶ä¿å­˜</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Pod</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: test-calico-pod-2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  containers:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: nginx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: nginx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - containerPort: </span><span class="token number" style="color:rgb(247, 140, 108)">80</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>åœ¨k8sä¸­åº”ç”¨è¿™ä¸ªyaml</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f test-calico-pod-2.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li>æŸ¥è¯¢ test-calico-pod-1 ä¸ test-calico-pod-2 çš„è™šæ‹Ÿ IP</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pod -o wide </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> test-calico-pod</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li>ç™»å…¥ test-calico-pod-1 çš„å®¹å™¨å†…ï¼Œping é€š test-calico-pod-2 çš„ IP å³éªŒè¯æˆåŠŸ</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exec</span><span class="token plain"> -it test-calico-pod-1 </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ping</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${test-calico-pod-2çš„IP}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="è®¾å¤‡æ’ä»¶å®‰è£…"></a>è®¾å¤‡æ’ä»¶å®‰è£…<a class="hash-link" href="#è®¾å¤‡æ’ä»¶å®‰è£…" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>å¦‚æœèŠ‚ç‚¹æ‹¥æœ‰å…¶ä»–èµ„æºï¼Œå¦‚ GPUã€FPGA ç­‰ï¼Œä¸ºäº†åœ¨ k8s é›†ç¾¤ä¸­èƒ½å¤Ÿå‘ç°å¹¶åˆ©ç”¨è¿™äº›èµ„æºï¼Œéœ€è¦å®‰è£…ç›¸åº”çš„è®¾å¤‡æ’ä»¶</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="nvidia-device-pluginå®‰è£…"></a>nvidia-device-pluginå®‰è£…<a class="hash-link" href="#nvidia-device-pluginå®‰è£…" title="Direct link to heading">#</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ä¸ºäº†åœ¨k8sé›†ç¾¤ä¸­èƒ½å¤Ÿå‘ç° NVIDIA GPU èµ„æºï¼Œéœ€è¦å®‰è£… NVIDIA çš„è®¾å¤‡æ’ä»¶ï¼Œå¦‚æœ k8s é›†ç¾¤ä¸­ä¸å­˜åœ¨ NVIDIA GPU èŠ‚ç‚¹ï¼Œåˆ™è·³è¿‡è¿™ä¸€æ­¥</p></div></div><ul><li><strong>å‰ææ¡ä»¶</strong></li></ul><ol><li>NVIDIA GPU èŠ‚ç‚¹å¿…é¡»é¢„å…ˆå®‰è£…äº† <strong>NVIDIA é©±åŠ¨</strong>ï¼ˆå…·ä½“æ“ä½œè§ã€<a href="/docs/deployment/environment"><strong>ç¯å¢ƒä¾èµ–</strong></a>ã€‘ï¼‰</li><li>NVIDIA GPU èŠ‚ç‚¹å¿…é¡»é¢„å…ˆå®‰è£… <strong>nvidia-docker2.0</strong>ï¼ˆå·²åŒ…å«åœ¨å¿«é€Ÿéƒ¨ç½²è„šæœ¬ä¸­ï¼Œé€šè¿‡&quot;nvidia_gpu&quot;å‚æ•°ç¡®å®šï¼‰</li></ol><ul><li><strong>åœ¨ master èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£… nvidia çš„è®¾å¤‡æ’ä»¶</strong></li></ul><ol><li>ä¸‹è½½yamlæ–‡ä»¶</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.9.0/nvidia-device-plugin.yml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> nvidia-device-plugin.yml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ol start="2"><li>æ·»åŠ  nodeSelector é€‰é¡¹ï¼Œåªéƒ¨ç½²åœ¨æœ‰nvidia gpuçš„èŠ‚ç‚¹ä¸Š</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: DaemonSet</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      nodeSelector:                 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ–°å¢</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        hardware-type: NVIDIAGPU    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ–°å¢</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ol start="3"><li>å®‰è£…æ’ä»¶</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create -f nvidia-device-plugin.yml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li><strong>åœ¨ master èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤ï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</strong></li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe </span><span class="token function" style="color:rgb(130, 170, 255)">node</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> gpu</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å¦‚æœæœ‰çœ‹åˆ° <strong>nvidia.com/gpu</strong> æœ‰å€¼åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="huawei-a910-device-plugin-å®‰è£…"></a>huawei-a910-device-plugin å®‰è£…<a class="hash-link" href="#huawei-a910-device-plugin-å®‰è£…" title="Direct link to heading">#</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ä¸ºäº†åœ¨ k8s é›†ç¾¤ä¸­èƒ½å¤Ÿå‘ç° Huawei A910 èµ„æºï¼Œéœ€è¦å®‰è£… Huawei çš„è®¾å¤‡æ’ä»¶ï¼Œå¦‚æœ k8s é›†ç¾¤ä¸­ä¸å­˜åœ¨ Huawei A910 èŠ‚ç‚¹ï¼Œåˆ™è·³è¿‡è¿™ä¸€æ­¥</p></div></div><ul><li><strong>å‰ææ¡ä»¶</strong></li></ul><p>Huawei A910 èŠ‚ç‚¹å¿…é¡»é¢„å…ˆå®‰è£…äº† <strong>Huawei A910 é©±åŠ¨</strong>ï¼ˆå…·ä½“æ“ä½œè§ã€<a href="/docs/deployment/environment"><strong>ç¯å¢ƒä¾èµ–</strong></a>ã€‘ï¼‰</p><ul><li><strong>åœ¨ master èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£… huawei çš„è®¾å¤‡æ’ä»¶</strong></li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create -f https://gitee.com/apulisplatform/k8s-device-plugin/raw/master/deployment/a910-device-plugin.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li><strong>åœ¨ master èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤ï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</strong></li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe </span><span class="token function" style="color:rgb(130, 170, 255)">node</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> npu</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å¦‚æœæœ‰çœ‹åˆ° <strong>npu.huawei.com/NPU</strong> æœ‰å€¼åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="calicoç½‘ç»œé…ç½®"></a>calicoç½‘ç»œé…ç½®<a class="hash-link" href="#calicoç½‘ç»œé…ç½®" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>é’ˆå¯¹ä¸åŒçš„ç”¨æˆ·åœºæ™¯ï¼Œéœ€æ ¹æ®é›†ç¾¤å¤§å°åšç›¸åº”ç½‘ç»œé…ç½®è°ƒæ•´ï¼Œä»¥æ±‚è¾¾åˆ°æœ€ä½³çš„æ€§èƒ½è¡¨ç°</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="é›†ç¾¤èŠ‚ç‚¹å°‘äº50ä¸ª"></a>é›†ç¾¤èŠ‚ç‚¹å°‘äº50ä¸ª<a class="hash-link" href="#é›†ç¾¤èŠ‚ç‚¹å°‘äº50ä¸ª" title="Direct link to heading">#</a></h3><ul><li>ä¸‹è½½é…ç½®æ–‡ä»¶</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> https://docs.projectcalico.org/v3.10/manifests/calico.yaml -O</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>calico.yaml</code> çš„ <code>CALICO_IPV4POOL_CIDR</code>ã€<code>IP_AUTODETECTION_METHOD</code> é…ç½®é¡¹</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: DaemonSet</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: calico-node</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: kube-system</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    k8s-app: calico-node</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  containers:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - name: CALICO_IPV4POOL_CIDR</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#   value: &quot;192.168.0.0/16&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: IP_AUTODETECTION_METHOD</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        value: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;can-reach=</span><span class="token string variable" style="color:rgb(191, 199, 213)">${DNS æœåŠ¡å™¨ IP åœ°å€}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å»æ‰ <code>CALICO_IPV4POOL_CIDR</code> æ³¨é‡Šï¼ˆæ³¨æ„-è¦ä¸å…¶ä»–é¡¹çš„-å¯¹é½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰ï¼Œå¹¶é…ç½® value å€¼ï¼Œä½¿å…¶ä¸ <code>base.conf</code> ä¸­çš„ <code>pod_network_cidr</code> é…ç½®é¡¹ä¿æŒä¸€è‡´</p><p>å¢åŠ  <code>IP_AUTODETECTION_METHOD</code> é…ç½®é¡¹ï¼Œvalue å€¼åé¢çš„ç½‘æ®µé…ç½®ä¸ºDNS æœåŠ¡å™¨ IP åœ°å€ï¼Œæˆ–è€…å‚è€ƒ <a href="#calico%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E8%A7%A3%E9%87%8A"><strong>calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š</strong></a>ï¼Œæ ¹æ®è‡ªèº«é›†ç¾¤æƒ…å†µé…ç½®</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="é›†ç¾¤èŠ‚ç‚¹å¤§äº-50-ä¸ª"></a>é›†ç¾¤èŠ‚ç‚¹å¤§äº 50 ä¸ª<a class="hash-link" href="#é›†ç¾¤èŠ‚ç‚¹å¤§äº-50-ä¸ª" title="Direct link to heading">#</a></h3><ul><li>ä¸‹è½½é…ç½®æ–‡ä»¶</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> https://docs.projectcalico.org/v3.10/manifests/calico-typha.yaml -o calico.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ul><li>ä¿®æ”¹ã€<a href="#%E5%8D%95master%E8%8A%82%E7%82%B9%E6%96%B9%E6%A1%88%E9%83%A8%E7%BD%B2"><strong>å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²</strong></a>ã€‘ä¸­æä¾›çš„é…ç½®æ–‡ä»¶ <code>base.conf</code> çš„ <code>cidrç½‘æ®µ</code> é…ç½®é¡¹</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cidr ç½‘æ®µ</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">pod_network_cidr</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10.244.0.0/16&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">service_cidr</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10.96.0.0/12&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p><code>pod_network_cidr</code>ã€<code>service_cidr</code> æ ¹æ®é›†ç¾¤å¤§å°ï¼Œé¢„ä¼°å¯èƒ½å­˜åœ¨ pod çš„æ•°é‡ï¼Œé‡æ–°åˆ’åˆ† pod å’Œ service çš„è™šæ‹Ÿç½‘æ®µï¼Œä¿è¯èƒ½æ»¡è¶³é›†ç¾¤ä½¿ç”¨ï¼Œä¸ä¼šå‡ºç° ip åœ°å€ç”¨å°½é—®é¢˜</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>service-cidr</code> ç½‘æ®µä¸èƒ½å’Œ <code>pod_network_cidr</code> é‡å </p></div></div><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>calico.yaml</code> çš„ <code>CALICO_IPV4POOL_CIDR</code>ã€<code>IP_AUTODETECTION_METHOD</code> é…ç½®é¡¹</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: DaemonSet</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: calico-node</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: kube-system</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    k8s-app: calico-node</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  containers:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - name: CALICO_IPV4POOL_CIDR</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#   value: &quot;192.168.0.0/16&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: IP_AUTODETECTION_METHOD</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        value: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;can-reach=</span><span class="token string variable" style="color:rgb(191, 199, 213)">${DNS æœåŠ¡å™¨ IP åœ°å€}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å»æ‰ <code>CALICO_IPV4POOL_CIDR</code> æ³¨é‡Šï¼Œå¹¶é…ç½® value å€¼ï¼Œä½¿å…¶ä¸ <code>base.conf</code> ä¸­çš„ <code>pod_network_cidr</code> é…ç½®é¡¹ä¿æŒä¸€è‡´</p><p>å¢åŠ  <code>IP_AUTODETECTION_METHOD</code> é…ç½®é¡¹ï¼Œvalue å€¼åé¢çš„ç½‘æ®µé…ç½®ä¸ºDNS æœåŠ¡å™¨ IP åœ°å€ï¼Œæˆ–è€…å‚è€ƒ <a href="#calico%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E8%A7%A3%E9%87%8A"><strong>calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š</strong></a>ï¼Œæ ¹æ®è‡ªèº«é›†ç¾¤æƒ…å†µé…ç½®</p><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>calico.yaml</code> çš„ <code>calico-typha</code> ç»„ä»¶å…·æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„å‰¯æœ¬æ•°</li></ul><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1beta1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Deployment</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: calico-typha</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  replicas: </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">å‰¯æœ¬æ•°</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>å»ºè®®æ¯ 200 ä¸ªèŠ‚ç‚¹è‡³å°‘åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ï¼Œä¸è¶…è¿‡ 20 ä¸ªå‰¯æœ¬,åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å»ºè®®è‡³å°‘ä½¿ç”¨ 3 ä¸ªå‰¯æœ¬ï¼Œå…·ä½“å¯ä»¥å‚è§ã€<a href="https://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises" target="_blank" rel="noopener noreferrer"><strong>Calico å®˜æ–¹æ–‡æ¡£</strong></a>ã€‘</p><p>é…ç½®å®Œæ¯•ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ã€<a href="#%E5%8D%95master%E8%8A%82%E7%82%B9%E6%96%B9%E6%A1%88%E9%83%A8%E7%BD%B2"><strong>å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²</strong></a>ã€‘æä¾›çš„å¿«é€Ÿéƒ¨ç½²è„šæœ¬ï¼Œä¸€é”®éƒ¨ç½² master èŠ‚ç‚¹</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š"></a>calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š<a class="hash-link" href="#calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š" title="Direct link to heading">#</a></h3><ul><li><p><strong>CALICO_IPV4POOL_CIDR:</strong> é›†ç¾¤ Pod çš„ IP çš„ cidr ç½‘æ®µ</p></li><li><p><strong>CALICO_IPV4POOL_IPIP:</strong> é›†ç¾¤ Pod ä¹‹é—´çš„æ•°æ®åŒ…è·¯ç”±æ¨¡å¼</p><ol><li>IPIP æ¨¡å¼å¡«å†™: &quot;Always&quot;</li><li>Bgp æ¨¡å¼å¡«å†™: &quot;Off&quot;</li><li>è·¨ç½‘æ®µæ¨¡å¼å¡«å†™: &quot;CrossSubnet&quot; (è·¨ç½‘æ®µæ¨¡å¼å³ IPIP-Bgp æ··åˆæ¨¡å¼: åŒå­ç½‘å†…è·¯ç”±é‡‡ç”¨ Bgp æ¨¡å¼ï¼Œè·¨å­ç½‘è·¯ç”±é‡‡ç”¨ IPIP æ¨¡å¼)</li></ol></li><li><p><strong>IP_AUTODETECTION_METHOD:</strong> calico å®ä¾‹å‘ç°èŠ‚ç‚¹ç›®æ ‡ç‰©ç†ç½‘å¡çš„æ–¹æ³•</p><ol><li>ä¸é…ç½® IP_AUTODETECTION_METHODï¼šé»˜è®¤ä½¿ç”¨&quot;first-found&quot;å¯»æ‰¾èŠ‚ç‚¹ç‰©ç†ç½‘å¡æ–¹æ³•ï¼Œå³å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªç½‘å¡è®¾å®šä¸ºèŠ‚ç‚¹çš„ç›®æ ‡ç‰©ç†ç½‘å¡</li><li>&quot;interface=${æ­£åˆ™è¡¨è¾¾å¼}&quot;: ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯»æ‰¾èŠ‚ç‚¹çš„ç›®æ ‡ç‰©ç†ç½‘å¡</li><li>&quot;can-reach=${DNS æœåŠ¡å™¨ IP åœ°å€}&quot;: ä½¿ç”¨ ping é€š DNS æœåŠ¡å™¨ IP çš„æ–¹æ³•å¯»æ‰¾èŠ‚ç‚¹çš„ç›®æ ‡ç‰©ç†ç½‘å¡</li><li>&quot;cidr=${ç‰©ç†ç½‘å¡ IP æ‰€åœ¨çš„ CIDR ç½‘æ®µ}&quot;: ä½¿ç”¨  CIDR çš„ç½‘æ®µåŒ¹é…æ–¹æ³•å¯»æ‰¾èŠ‚ç‚¹çš„ç›®æ ‡ç‰©ç†ç½‘å¡(v3.10ç‰ˆæœ¬ä¸æ”¯æŒ)</li></ol></li><li><p><strong>KUBERNETES_SERVICE_HOST:</strong> åœ¨å¤š master é«˜å¯ç”¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¯é…ç½® Kubernetes API Server çš„ HTTP ä»£ç†çš„ IP åœ°å€</p></li><li><p><strong>KUBERNETES_SERVICE_PORT:</strong> åœ¨å¤š master é«˜å¯ç”¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¯é…ç½® Kubernetes API Server çš„ HTTP ä»£ç†çš„ Port ç«¯å£</p></li><li><p><strong>KUBERNETES_SERVICE_PORT_HTTPS:</strong> åœ¨å¤š master é«˜å¯ç”¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¯é…ç½® Kubernetes API Server çš„ HTTPS ä»£ç†çš„ Port ç«¯å£</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="å­˜å‚¨é©±åŠ¨å®‰è£…v405"></a>å­˜å‚¨é©±åŠ¨å®‰è£…ï¼ˆv4.0.5+ï¼‰<a class="hash-link" href="#å­˜å‚¨é©±åŠ¨å®‰è£…v405" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>é’ˆå¯¹ç¬¬ä¸‰æ–¹å¹³å°æ¥å£æ”¯æŒçš„å­˜å‚¨ç±»å‹ï¼Œéœ€è¦å®‰è£…å¯¹åº”çš„å­˜å‚¨é©±åŠ¨æ‰èƒ½æ­£å¸¸ä½¿ç”¨</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_uCgO" id="juicefs"></a>juicefs<a class="hash-link" href="#juicefs" title="Direct link to heading">#</a></h3><ol><li>ä¸‹è½½yamlæ–‡ä»¶</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://git.yunqiic.com/Yunqiic/pumpkin/src/tag/v4.0.5/deploy/single_master_k8s_install/juicefs_csi_driver.yaml </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#k8s v1.18åŠä»¥ä¸Š</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><p>æˆ–è€…</p><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://git.yunqiic.com/Yunqiic/pumpkin/src/tag/v4.0.5/deploy/single_master_k8s_install/juicefs_csi_driver_before_v1_18.yaml </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#k8s v1.18ä»¥ä¸‹</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ol start="2"><li>å®‰è£…é©±åŠ¨</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f juicefs_csi_driver.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div><ol start="3"><li>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</li></ol><div class="codeBlockContainer_ERxb"><div class="codeBlockContent_PEDJ shell"><pre tabindex="0" class="prism-code language-shell codeBlock_5APD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_WrPf"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system get pods -l app.kubernetes.io/name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">juicefs-csi-driver</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TaRm clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/deployment/environment"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ç¯å¢ƒä¾èµ–</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/deployment/harbor"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">éƒ¨ç½²Harborä»“åº“ Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_d7-6 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç‰ˆæœ¬ä¿¡æ¯" class="table-of-contents__link">ç‰ˆæœ¬ä¿¡æ¯</a></li><li><a href="#å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²" class="table-of-contents__link">å•masterèŠ‚ç‚¹æ–¹æ¡ˆéƒ¨ç½²</a><ul><li><a href="#éƒ¨ç½²è„šæœ¬è¯´æ˜" class="table-of-contents__link">éƒ¨ç½²è„šæœ¬è¯´æ˜</a></li><li><a href="#masterèŠ‚ç‚¹éƒ¨ç½²" class="table-of-contents__link">masterèŠ‚ç‚¹éƒ¨ç½²</a></li><li><a href="#node-èŠ‚ç‚¹éƒ¨ç½²åŒ…æ‹¬æ–°å¢-node-èŠ‚ç‚¹" class="table-of-contents__link">node èŠ‚ç‚¹éƒ¨ç½²ï¼ˆåŒ…æ‹¬æ–°å¢ node èŠ‚ç‚¹ï¼‰</a></li><li><a href="#é›†ç¾¤è™šæ‹ŸåŒ–ç½‘ç»œéªŒè¯" class="table-of-contents__link">é›†ç¾¤è™šæ‹ŸåŒ–ç½‘ç»œéªŒè¯</a></li></ul></li><li><a href="#è®¾å¤‡æ’ä»¶å®‰è£…" class="table-of-contents__link">è®¾å¤‡æ’ä»¶å®‰è£…</a><ul><li><a href="#nvidia-device-pluginå®‰è£…" class="table-of-contents__link">nvidia-device-pluginå®‰è£…</a></li><li><a href="#huawei-a910-device-plugin-å®‰è£…" class="table-of-contents__link">huawei-a910-device-plugin å®‰è£…</a></li></ul></li><li><a href="#calicoç½‘ç»œé…ç½®" class="table-of-contents__link">calicoç½‘ç»œé…ç½®</a><ul><li><a href="#é›†ç¾¤èŠ‚ç‚¹å°‘äº50ä¸ª" class="table-of-contents__link">é›†ç¾¤èŠ‚ç‚¹å°‘äº50ä¸ª</a></li><li><a href="#é›†ç¾¤èŠ‚ç‚¹å¤§äº-50-ä¸ª" class="table-of-contents__link">é›†ç¾¤èŠ‚ç‚¹å¤§äº 50 ä¸ª</a></li><li><a href="#calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š" class="table-of-contents__link">calicoå‡ ä¸ªé‡è¦çš„éƒ¨ç½²ç¯å¢ƒå˜é‡çš„ä½œç”¨è§£é‡Š</a></li></ul></li><li><a href="#å­˜å‚¨é©±åŠ¨å®‰è£…v405" class="table-of-contents__link">å­˜å‚¨é©±åŠ¨å®‰è£…ï¼ˆv4.0.5+ï¼‰</a><ul><li><a href="#juicefs" class="table-of-contents__link">juicefs</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å­¦ä¹ </div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/intro">å¹³å°ä»‹ç»</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/manual/intro">ç”¨æˆ·æ‰‹å†Œ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/management/intro">ç®¡ç†å‘˜æ‰‹å†Œ</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾åŒº</div><ul class="footer__items"><li class="footer__item"><a href="https://www.yunqiic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">äº‘å¯æ™ºåŸ</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">åšå®¢</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/intro">å®‰è£…æµç¨‹</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Pumpkin build by äº‘å¯æ™ºåŸ</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a24ae582.js"></script>
<script src="/assets/js/main.b78f448d.js"></script>
</body>
</html>